#!/usr/bin/env python

import grass.script as gscript


def main():

    gscript.run_command('g.region', flags='p')
    # Landuse map from http://download.geofabrik.de/europe/italy/isole.html
    #gscript.run_command('v.import', input='D:/Dokumente_D/Uni/5_Semester/GIS_Proseminar/project/fossgis_project/etna/gis_osm_landuse_a_free_1.shp', output='landuse', overwrite=True)
    #geojson download with script download.sh
    ##gscript.run_command('v.import', input='D:/Dokumente_D/Uni/5_Semester/GIS_Proseminar/project/fossgis_project/etna/streets.geojson', output='streets', overwrite=True)
    #gscript.run_command('v.import', input='D:/Dokumente_D/Uni/5_Semester/GIS_Proseminar/project/fossgis_project/etna/buildings_way.geojson', output='buildings_way', overwrite=True)
    #gscript.run_command('v.import', input='D:/Dokumente_D/Uni/5_Semester/GIS_Proseminar/project/fossgis_project/etna/buildings_rel.geojson', output='buildings_rel', overwrite=True)
    #gscript.run_command('v.import', input='D:/Dokumente_D/Uni/5_Semester/GIS_Proseminar/project/fossgis_project/etna/gis_osm_roads_free_1.shp', output='roads', overwrite=True)
    #gscript.run_command('g.region', overwrite=True, n='37:53:00N', s='37:24:00N', e='15:16:00E', w='14:47:00E', res='0.001')
    #gscript.run_command('v.in.region', overwrite=True, output='region')
    #gscript.run_command('v.clip', overwrite=True, input='roads@PERMANENT', clip='region@PERMANENT', output='roads_region')
    #create grid for vulnerability calculation
    gscript.run_command('v.mkgrid', map='roadpoints_density', position='region', box='0.01,0.01', overwrite=True)
    #gscript.run_command('v.to.points', input='roads@PERMANENT', type='line', output='roadpoints', dmax=50, overwrite=True)
    gscript.run_command('v.vect.stats', points='roadpoints@PERMANENT', areas='roadpoints_density@PERMANENT', count_column='roadpoints_count')#, type='point')
    gscript.run_command('v.to.rast', input='roadpoints_density@PERMANENT', output='roadpoints_density_raster', use='attr', attribute_column='roadpoints_count', overwrite=True, type='area')
    #reclassify building density
    #gscript.run_command('r.reclass', input='roadpoints_density_raster@PERMANENT', output='roadpoints_density_reclassified', rules='D:/Dokumente_D/Uni/5_Semester/GIS_Proseminar/project/fossgis_project/etna/reclassification_roadpoints_density.txt', overwrite=True)
    #gscript.run_command('r.resample', input='roadpoints_density_reclassified@PERMANENT', output='roadpoints_density_reclassified', overwrite=True)
if __name__ == '__main__':
    main()
